(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{50:function(t,a,n){"use strict";n.r(a);var s=n(0),e=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"component-injections"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#component-injections","aria-hidden":"true"}},[t._v("#")]),t._v(" Component Injections")]),n("p",[t._v("The default behavior for the plugin is to forcibly inject a validator instance for each component, which means each component has its own validator instance, this makes sharing error messages between components relatively hard depending on your case.")]),n("h2",{attrs:{id:"injecting-parent-validator"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#injecting-parent-validator","aria-hidden":"true"}},[t._v("#")]),t._v(" Injecting Parent Validator")]),n("p",[t._v("You can rely on Vue's "),n("a",{attrs:{href:"https://vuejs.org/v2/api/#provide-inject",target:"_blank",rel:"noopener noreferrer"}},[t._v("Provide/Inject API")]),t._v(" for this case, here is how it works:")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"highlighted-line"}},[t._v("  inject"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v("'$validator'")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")])]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// OR use object synatx")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"highlighted-line"}},[t._v("  inject"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")])]),n("span",{attrs:{class:"highlighted-line"}},[t._v("    $validator"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'$validator'")])]),n("span",{attrs:{class:"highlighted-line"}},[t._v("  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")])]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("p",[t._v("This will make the component inherit it's parent's validator instance, thus sharing all errors and validation state. Meaning it has access to the same "),n("code",[t._v("errors")]),t._v(" and "),n("code",[t._v("fields")]),t._v(" computed properties as well.")]),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),n("p",[t._v("If the direct parent isn't able to provide a validator instance, the API will traverse the tree upwards looking for a parent that can.")])]),n("h2",{attrs:{id:"disabling-automatic-injection"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#disabling-automatic-injection","aria-hidden":"true"}},[t._v("#")]),t._v(" Disabling Automatic Injection")]),n("p",[t._v("You may also want to stop all automatic injections to reduce the memory footprint of the plugin.")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'vue'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" VeeValidate "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'vee-validate'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nVue"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("use")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VeeValidate"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" inject"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("p",[t._v("This will make the plugin stop instantiating a new validator for each component instance, excluding the root instance. But you would need to manage how a component gets its validator instance if it needs it. So it can inject it from a parent or "),n("a",{attrs:{href:"#requesting-a-new-validator-instance"}},[t._v("request a fresh validator instance")]),t._v(".")]),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),n("p",[t._v("Injecting the parent validator with the "),n("code",[t._v("Inject API")]),t._v(" will work the same regardless of automatic injection state. The component will always get its validator instance from the first parent that can provide it.")])]),n("h3",{attrs:{id:"requesting-a-new-validator-instance"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#requesting-a-new-validator-instance","aria-hidden":"true"}},[t._v("#")]),t._v(" Requesting a new validator instance")]),n("p",[t._v("By setting a "),n("code",[t._v("validator")]),t._v(" property on the component's VeeValidate constructor options:")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  $_veeValidate"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"highlighted-line"}},[t._v("    validator"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'new'")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// give me my own validator instance.")])]),t._v("  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("p",[t._v("Typically a component would need a new validator instance for various reasons; common examples are if it is a "),n("code",[t._v("vue-router")]),t._v(" route component or a "),n("code",[t._v("nuxt")]),t._v(" page component. Requesting a fresh validator instance will make the component the only provider for validator instances to its children.")]),n("div",{staticClass:"warning custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),n("p",[t._v("With SSR Frameworks like Nuxt, it is recommended to disable automatic injection since it may cause memory leaks due to all the validator instances being created for every component, which will slow down your site.")])])])}],!1,null,null,null);a.default=e.exports}}]);